(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"34ab":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll",staticStyle:{height:"100%"},attrs:{id:"adminMain"}},[i("q-pull-to-refresh",{ref:"pullToRefresh",on:{refresh:e.getAdmins}},[i("div",{staticClass:"content"},[i("q-list",[i("div",{staticClass:"full-width q-py-sm q-px-md q-mt-sm q-px-md-xl"},[i("q-btn",{staticClass:"full-width",attrs:{push:"",color:"positive",label:"Add admin"},on:{click:e.toggleVisible}}),i("q-slide-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}]},[i("q-card",{staticClass:"card q-pa-md q-my-md q-mx-xs"},[i("q-input",{staticClass:"q-my-sm",attrs:{label:"Enter email / username",type:"email",error:e.validateForm(),"error-message":"Email Invalid"},model:{value:e.newAdmin,callback:function(t){e.newAdmin=t},expression:"newAdmin"}}),i("q-btn",{staticClass:"full-width q-my-sm",attrs:{push:"",color:"positive",label:"add"},on:{click:e.addAdmin}}),i("q-btn",{staticClass:"full-width q-my-sm",attrs:{flat:"",color:"negative",label:"reset"},on:{click:e.resetForm}})],1)],1)])],1),i("q-item-label",{attrs:{header:""}},[e._v("All admin")]),e._l(e.adminList,(function(t,a){return i("div",{key:a},[i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{color:"primary","text-color":"white",icon:"account_circle"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(t.fullname))]),i("q-item-label",{attrs:{caption:"",lines:"2"}},[e._v(e._s(t.email))])],1),i("q-item-section",{attrs:{side:""}},[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"delete",color:"negative"},on:{click:function(i){return e.toggleConfirm(t)}}})],1)],1),i("q-separator",{attrs:{spaced:"",inset:""}})],1)}))],2)],1)]),i("q-dialog",{model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[i("q-card",{staticStyle:{width:"400px"}},[i("q-card-section",{staticClass:"row items-center"},[i("div",{staticClass:"text-h6"},[e._v("Are you sure?")])]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-px-md q-mx-sm q-my-sm",attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:e.toggleConfirm}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-px-md q-mx-sm q-my-sm",attrs:{push:"",label:"Delete",color:"negative"},on:{click:e.deleteAdmin}})],1)],1)],1)],1)},s=[],n=i("c973"),l=i.n(n),o={name:"Admin",data(){return{adminList:[],loading:!0,visible:!1,newAdmin:"",confirm:!1,delete:{}}},methods:{getAdmins(e){var t=this;return l()((function*(){yield t.$axios.get("/auth/admin").then(e=>{t.adminList=e.data.data}).catch(e=>{t.$q.notify({message:"Data failed to",type:"negative",actions:[{icon:"close",color:"white"}]})}),e&&e(),t.loading=!1}))()},toggleVisible(){this.visible=!this.visible},resetForm(){this.newAdmin=""},toggleConfirm(e){this.visible=!1,this.delete=e||{},this.confirm=!this.confirm},addAdmin(){var e=this;return l()((function*(){e.loading=!0,yield e.$axios.post("/auth/admin",{email:e.newAdmin}).then(t=>{e.$q.notify({message:`Admin access granted to ${e.newAdmin} successfully!`,type:"positive",actions:[{icon:"close",color:"white"}]}),e.getAdmins(),e.newAdmin="",e.visible=!1}).catch(t=>{e.$q.notify({message:`Failed to add ${e.newAdmin} as admin`,type:"negative",actions:[{icon:"close",color:"white"}],caption:t})}),e.loading=!1}))()},deleteAdmin(e){var t=this;return l()((function*(){t.loading=!0,yield t.$axios.delete("/auth/admin/",{params:{id:t.delete._id}}).then(e=>{t.$q.notify({message:"Admin deleted successfully!",type:"positive",actions:[{icon:"close",color:"white"}]}),t.getAdmins(),t.visible=!1,t.delete={}}).catch(e=>{t.$q.notify({message:"Failed to delete admin",type:"negative",actions:[{icon:"close",color:"white"}],caption:e})}),t.loading=!1}))()},validateForm(){const e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!e.test(String(this.newAdmin).toLowerCase())}},created(){this.getAdmins()}},c=o,r=i("2877"),d=i("59d7"),m=i("1c1c"),p=i("9c40"),u=i("e9c1"),h=i("f09f"),v=i("27f9"),q=i("0170"),f=i("eb85"),g=i("66e5"),b=i("4074"),w=i("cb32"),y=i("0016"),A=i("24e8"),C=i("a370"),x=i("4b7e"),Q=i("7f67"),$=i("eebe"),k=i.n($),_=Object(r["a"])(c,a,s,!1,null,null,null);t["default"]=_.exports;k()(_,"components",{QPullToRefresh:d["a"],QList:m["a"],QBtn:p["a"],QSlideTransition:u["a"],QCard:h["a"],QInput:v["a"],QItemLabel:q["a"],QSeparator:f["a"],QItem:g["a"],QItemSection:b["a"],QAvatar:w["a"],QIcon:y["a"],QDialog:A["a"],QCardSection:C["a"],QCardActions:x["a"]}),k()(_,"directives",{ClosePopup:Q["a"]})}}]);