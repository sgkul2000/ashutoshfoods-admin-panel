(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"0196":function(e,t,a){},"17be":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll",staticStyle:{height:"100%",width:"100%","overflow-x":"hidden"},attrs:{id:"productMain"}},[a("q-pull-to-refresh",{on:{refresh:e.getProduct}},[e.isImage?a("q-carousel",{attrs:{swipeable:"",animated:"",arrows:"",navigation:"",infinite:"",autoplay:""},model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},e._l(e.getImages,(function(e,t){return a("q-carousel-slide",{key:t,attrs:{name:t,"img-src":e}})})),1):e._e(),a("q-card",{staticClass:"card q-mx-sm-md q-px-sm-md q-py-sm-md"},[a("q-card-section",[a("q-btn",{staticClass:"full-width",attrs:{flat:e.product.isAvailable,push:!e.product.isAvailable,color:e.product.isAvailable?"negative":"positive",label:e.product.isAvailable?"Mark as unavailable":"Mark as available"}}),a("q-input",{attrs:{label:"Name",readonly:!e.editMode,loading:e.loading},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),a("q-input",{attrs:{autogrow:"",type:"textarea",label:"Description",readonly:!e.editMode,loading:e.loading},model:{value:e.product.description,callback:function(t){e.$set(e.product,"description",t)},expression:"product.description"}}),a("q-input",{attrs:{type:"number",label:"Price",readonly:!e.editMode,loading:e.loading},model:{value:e.product.price,callback:function(t){e.$set(e.product,"price",t)},expression:"product.price"}}),a("q-select",{attrs:{options:e.perOptions,label:"Price per",readonly:!e.editMode,loading:e.loading},model:{value:e.product.per,callback:function(t){e.$set(e.product,"per",t)},expression:"product.per"}}),a("q-select",{attrs:{options:e.categoryOptions,label:"Category",readonly:!e.editMode,loading:e.loading},model:{value:e.product.category,callback:function(t){e.$set(e.product,"category",t)},expression:"product.category"}}),e._l(e.product.images,(function(t,i){return a("q-input",{key:i,attrs:{"type:":"url",label:"Image "+(i+1)+" link",readonly:!e.editMode,loading:e.loading},model:{value:e.product.images[i],callback:function(t){e.$set(e.product.images,i,t)},expression:"product.images[index]"}})})),e.editMode?a("q-btn",{staticClass:"full-width q-my-md",attrs:{push:"",color:"positive",label:"add image"},on:{click:e.addImage}}):e._e()],2)],1)],1),a("q-dialog",{model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[a("q-card",{staticStyle:{width:"400px"}},[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h8"},[e._v("Are you sure?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-px-md q-mx-sm q-my-sm",attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:e.toggleDelete}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-px-md q-mx-sm q-my-sm",attrs:{push:"",label:"Delete",color:"negative"},on:{click:e.deleteProduct}})],1)],1)],1),e.editMode?e._e():a("q-btn",{staticClass:"cancelBtn fixed-bottom-right q-ma-md q-ma-md-xl",attrs:{push:"",color:"negative",round:"",icon:"delete"},on:{click:e.toggleDelete}}),e.editMode?a("q-btn",{staticClass:"cancelBtn fixed-bottom-right q-ma-md q-ma-md-xl",attrs:{push:"",color:"negative",round:"",icon:"close"},on:{click:e.cancelEdit}}):e._e(),e.editMode?a("q-btn",{staticClass:"editBtn fixed-bottom-right q-ma-md q-ma-md-xl",attrs:{push:"",loading:e.loading,color:"primary",round:"",icon:"done"},on:{click:e.applyChanges}}):a("q-btn",{staticClass:"editBtn fixed-bottom-right q-ma-md q-ma-md-xl",attrs:{push:"",color:"primary",round:"",icon:"create"},on:{click:e.activateEditMode}})],1)},o=[],r=(a("e01a"),a("a434"),a("c973")),c=a.n(r),s={name:"Product",data(){return{loading:!0,product:{},editMode:!1,currentProduct:{},categoryOptions:["bakery","dryfruits","vegitables"],perOptions:["KG","halfKG","quarterKG"],slide:1,confirmDelete:!1,imageList:["https://cdn.quasar.dev/img/quasar.jpg","https://cdn.quasar.dev/img/parallax2.jpg","https://cdn.quasar.dev/img/parallax1.jpg","https://cdn.quasar.dev/img/mountains.jpg"]}},props:["id"],methods:{addImage(){if(3===this.product.images.length)return this.$q.notify({message:"Maximum image limit reached",type:"negative",actions:[{icon:"close",color:"white"}]}),null;this.product.images.push("")},getProduct(e){var t=this;return c()((function*(){if(t.editMode)return e&&e(),void t.$q.notify({message:"Quit edit mode to refresh.",type:"negative",actions:[{icon:"close",color:"white"}]});t.loading=!0;try{var a=yield t.$axios.get("/product",{params:{id:t.id}});t.product=a.data.data[0],t.currentProduct=JSON.parse(JSON.stringify(t.product))}catch(i){t.$q.notify({message:"Data failed to load",type:"negative",caption:i,actions:[{icon:"close",color:"white"}]})}e&&e(),t.loading=!1}))()},activateEditMode(){this.editMode=!0},cancelEdit(){this.product=this.currentProduct,this.editMode=!1},applyChanges(){var e=this;return c()((function*(){if(e.product.images)for(var t=0;t<e.product.images.length;t++)""===e.product.images[t]&&(yield e.product.images.splice(0,1));yield e.$axios.put("product/"+e.id,{name:e.product.name,description:e.product.description,price:e.product.price,category:e.product.category,per:e.product.per,isAvailable:e.product.isAvailable,images:e.product.images}).then(t=>{e.product=t.data.data,e.currentProduct=JSON.parse(JSON.stringify(e.product)),e.editMode=!1}).catch(t=>{e.$q.notify({message:"Data failed to load",type:"negative",caption:t,actions:[{icon:"close",color:"white"}]})})}))()},toggleDelete(){this.confirmDelete&&(this.newProduct.images=this.newProduct.images.filter(e=>!(""===e))),this.confirmDelete=!this.confirmDelete},deleteProduct(){this.loading=!0,this.$axios.delete("/product/"+this.id).then(e=>{this.confirmDelete=!1,this.$q.notify({message:"Deleted product successfully!",type:"positive",actions:[{icon:"close",color:"white"}]}),this.$router.push({name:"Products"})}).catch(e=>{this.$q.notify({message:"Delete unsuccessful!",caption:e,type:"negative",actions:[{icon:"close",color:"white"}]})}),this.loading=!1}},created(){this.getProduct()},computed:{getImages(){return this.product.images.filter(e=>!(""===e))},isImage(){try{var e=this.product.images.filter(e=>!(""===e));return e.length>0}catch(t){return!1}}}},d=s,l=(a("b33f"),a("2877")),n=a("59d7"),p=a("880c"),u=a("62cd"),m=a("f09f"),g=a("a370"),h=a("9c40"),f=a("27f9"),v=a("ddd8"),y=a("24e8"),q=a("cb32"),b=a("4b7e"),x=a("7f67"),w=a("eebe"),k=a.n(w),C=Object(l["a"])(d,i,o,!1,null,"2d95ddb7",null);t["default"]=C.exports;k()(C,"components",{QPullToRefresh:n["a"],QCarousel:p["a"],QCarouselSlide:u["a"],QCard:m["a"],QCardSection:g["a"],QBtn:h["a"],QInput:f["a"],QSelect:v["a"],QDialog:y["a"],QAvatar:q["a"],QCardActions:b["a"]}),k()(C,"directives",{ClosePopup:x["a"]})},b33f:function(e,t,a){"use strict";var i=a("0196"),o=a.n(i);o.a}}]);