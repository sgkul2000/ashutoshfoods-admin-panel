(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"6efe":function(t,e,i){"use strict";var a=i("d0b3"),s=i.n(a);s.a},c6f7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loginMain"},[i("h4",[t._v("Ashutosh Foods")]),i("h6",[t._v("Admin Panel")]),i("div",{staticClass:"inputWrapper q-px-lg"},[i("q-input",{attrs:{label:"Enter email",dense:!0,type:"email",disable:t.loading,error:t.validateForm(),"error-message":"Email Invalid"},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"account_circle"}})]},proxy:!0}]),model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),i("q-input",{attrs:{label:"Enter password",dense:!0,type:t.isPwd?"password":"text",disable:t.loading,rules:[function(t){return!!t||"Password Required"}]},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0},{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),i("q-btn",{staticClass:"full-width",attrs:{disable:t.loading,id:"loginSubmit",color:"primary",label:"Login",padding:"20px auto"},on:{click:function(e){return t.login()}}}),i("q-btn",{staticClass:"full-width",attrs:{flat:"",disable:t.loading,id:"loginSubmit",color:"primary",label:"Forgot Password",padding:"20px auto"}})],1)])},s=[],n={name:"login",data(){return{email:"",password:"",isPwd:!0,loading:!1,delay:0,isEmailValid:!1}},watch:{email(t){this.isEmailValid=!1}},methods:{login(){this.loading=!0,this.$q.loadingBar.start(),this.$axios.post("/auth/login",{email:this.email,password:this.password}).then(t=>{var e=t.data;if(!e.auth)throw e.error;localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("jwt",e.token),this.$store.commit("mainStore/updateAuth",e.user),this.$router.push({name:"Home"}),this.$q.notify({type:"positive",message:"Welcome "+e.user.username})}).catch(t=>{this.$q.notify({message:"Login unsuccessful, please try again.",type:"negative",caption:t,actions:[{icon:"close",color:"white"}]})}),this.$q.loadingBar.stop(),this.loading=!1},validateForm(){const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!t.test(String(this.email).toLowerCase())}}},o=n,r=(i("6efe"),i("2877")),l=i("27f9"),d=i("0016"),c=i("9c40"),u=i("eebe"),p=i.n(u),m=Object(r["a"])(o,a,s,!1,null,"bed8bd18",null);e["default"]=m.exports;p()(m,"components",{QInput:l["a"],QIcon:d["a"],QBtn:c["a"]})},d0b3:function(t,e,i){}}]);